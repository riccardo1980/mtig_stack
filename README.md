# Mosquitto Telegraf InfluxDB Grafana - Basic configuration

## Basic configuration
Each service can be configured by providing a different configuration file.
A template one can be generated by directly using the relative image:
```Bash
docker run --rm telegraf telegraf config > telegraf.conf
docker run --rm influxdb influxd config > influxdb.conf

# Mosquitto 
docker run --rm -d eclipse-mosquitto
CONTAINER_ID=$(docker ps -aqf "ancestor=eclipse-mosquitto" | head -1)
docker cp $CONTAINER_ID:/mosquitto/config/mosquitto.conf .
docker stop $CONTAINER_ID

```

## Mosquitto

## Telegraf

## InfluxDB
To be moved to `docker-compose.yml`
```Bash
docker run -p 8086:8086 \
      -e INFLUXDB_DB=defaultdb \
      -e INFLUXDB_ADMIN_USER=admin \
      -e INFLUXDB_ADMIN_PASSWORD=adminpass \
      -e INFLUXDB_USER=user \
      -e INFLUXDB_USER_PASSWORD=userpass \
      -v influxdb:/var/lib/influxdb \
      influxdb:latest 
```
## Grafana

## Services launch
```Bash
docker compose -f docker-compose.yml up -d
```  

## Â Grafana login  
Open your browser at [http://127.0.0.1:3001](http://127.0.0.1:3001), use admin admin for user/password on grafana login. You can optionally change password, otherwise just press "skip".

## Add InfluxDB source:  
![img](imgs/add_data_source.png)
Select "Configuration" -> "Data Source" or blue button "Data Source"  
  * connector type: InfluxDB
  * URL: http://influxdb:8086
  * database: telegraf

At the bottom of the page, select "Save & Test" button.

## Configure a new dashboard
![img](imgs/configure_dashboard.png)